# 腾讯云 EdgeOne 部署说明

## 🚨 解决 404 问题的关键

你遇到的 `NOT_FOUND` 错误是因为 **index.html 不在站点根目录**。

## ✅ 正确的部署步骤

### 1. 使用已生成的部署包
项目根目录下已经有 `edgeone-deploy.zip` 文件（439KB）

### 2. 上传到 EdgeOne

#### 选项 A：通过控制台（推荐）
1. 登录腾讯云 EdgeOne 控制台
2. 进入你的站点
3. 找到"文件管理"或"静态资源托管"
4. **清空所有现有文件**
5. 上传 `edgeone-deploy.zip`
6. **解压到根目录**（不要保留 zip 文件名作为文件夹）

#### 选项 B：手动上传文件
1. 解压 `edgeone-deploy.zip` 到本地
2. 上传所有文件到 EdgeOne 根目录
3. 确保文件结构如下：

```
站点根目录/
├── index.html          ← 必须在这里！
├── _next/
│   └── static/
│       └── ...
├── favicon.ico
├── file.svg
├── globe.svg
├── next.svg
├── vercel.svg
├── window.svg
└── 404.html
```

### 3. 验证部署

访问你的域名，应该看到登录页面。

## ❌ 常见错误

### 错误的文件结构
```
站点根目录/
└── out/                ← 错误！不应该有这个文件夹
    └── index.html
```

或

```
站点根目录/
└── listing-ai-demo/    ← 错误！不应该有这个文件夹
    └── out/
        └── index.html
```

### 正确的文件结构
```
站点根目录/
├── index.html          ← 正确！直接在根目录
├── _next/
└── ...
```

## 🔍 检查清单

部署后检查：
- [ ] 访问域名能看到页面（不是 404）
- [ ] 浏览器控制台没有 404 错误
- [ ] 可以正常登录
- [ ] 页面样式正常显示

## 📝 EdgeOne 配置建议

### 路由重写规则
为了支持单页应用路由，在 EdgeOne 添加重写规则：

```
匹配规则：/*
重写目标：/index.html
```

这样刷新页面时不会 404。

### 缓存配置
建议配置：
- HTML 文件：不缓存或短缓存（5分钟）
- JS/CSS 文件：长缓存（1年）
- 图片文件：长缓存（1年）

## 🆘 仍然 404？

### 步骤 1：检查文件
在 EdgeOne 控制台查看文件列表，确认：
1. `index.html` 在根目录
2. `_next/` 文件夹在根目录
3. 没有多余的父文件夹

### 步骤 2：清除缓存
1. 在 EdgeOne 控制台清除缓存
2. 浏览器清除缓存（Ctrl+Shift+R 或 Cmd+Shift+R）
3. 重新访问

### 步骤 3：检查域名配置
1. 确认域名已正确绑定
2. DNS 解析正确
3. SSL 证书有效

## 📦 重新生成部署包

如果需要重新构建：

```bash
cd listing-ai-demo
npm run build
cd out
zip -r ../edgeone-deploy.zip .
```

新的 `edgeone-deploy.zip` 会在 `listing-ai-demo/` 目录下。

## 🎯 快速测试

部署后测试这些功能：
1. 访问首页 → 应该看到登录页
2. 登录（任意邮箱+密码）→ 进入首页
3. 点击"新建竞品分析" → 打开新建页面
4. 点击"新建 Listing" → 打开新建页面
5. 查看竞品、资源、设置页面

全部正常就说明部署成功了！🎉
